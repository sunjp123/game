(window.webpackJsonp=window.webpackJsonp||[]).push([["main"],{"./config/constConfig.js":
/*!*******************************!*\
  !*** ./config/constConfig.js ***!
  \*******************************/
/*! no static exports found */function(e,n){n.REDIS_MESSAGE={SHARE_MESSAGE:{KEY:"SHARE_MESSAGE_KEY",EVENT:"SHARE_MESSAGE_EVENT",CONTENT:"%USER% %OPERATE% %CONTENT%"}};n.HAPPY_RECORD={HOST_URL:"http://localhost:3001"},n.GAME_MESSAGE={GAME_INIT:"GAME_INIT",REDIS_READY:"REDIS_READY",GAME_SELECT_ROLE:"GAME_SELECT_ROLE",GAME_PLAY_CHESS:"GAME_PRESS_CHESS",GAME_START:"GAME_START",GAME_FINISH:"GAME_FINISH"}},"./static/index.js":
/*!*************************!*\
  !*** ./static/index.js ***!
  \*************************/
/*! no static exports found */function(e,n,t){"use strict";var i,o=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},r=function(e){return e&&e.__esModule?e:{default:e}}(t(/*! ./public/socket */"./static/public/socket.js")),a=t(/*! ../config/constConfig */"./config/constConfig.js");function s(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var E={},c=null,l=null,d=null,p=0,u=[],w=null,h=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t={name:"wuziqi",number:window.__GAME_NUMBER__,uid:window.__USER_ID__};f.client.emit(e,o({},t,n))},f=new r.default({events:(i={connect:function(){console.log("connect")}},s(i,a.GAME_MESSAGE.REDIS_READY,function(e){h(a.GAME_MESSAGE.GAME_INIT)}),s(i,a.GAME_MESSAGE.GAME_INIT,function(e){E="string"==typeof e?JSON.parse(e):e,p=E.status,function(e){w=function(){var e=new Stats;return e.setMode(0),e.domElement.style.position="absolute",e.domElement.style.left="0px",e.domElement.style.top="0px",document.getElementById("Stats-output").appendChild(e.domElement),e}(),c=new THREE.Scene,l=v(e,c),u=A(e,c),(d=new THREE.WebGLRenderer).setClearColor(new THREE.Color(15658734,1)),d.setSize(window.innerWidth,window.innerHeight),d.shadowMapEnabled=!0;var n=new THREE.AmbientLight(16777215);c.add(n);var t=new THREE.PointLight(16777215);t.position.set(-40,60,-10),t.distance=1e3,c.add(t),M(e),document.getElementById("WebGL-output").appendChild(d.domElement),H(),g(e)}(T(E.roles))}),s(i,a.GAME_MESSAGE.GAME_SELECT_ROLE,function(e){var n=e.status,t=e.role,i=e.canStart,o=e.uid;n&&("playerA"!=t&&"playerB"!=t||(p=i?1:0),E.roles[t]=o,window.__USER_ID__==o?function(e){l=v(e,c),u=A(e,c),H(),g(e),M(e)}(t):T(E.roles)&&S(c))}),s(i,a.GAME_MESSAGE.GAME_PLAY_CHESS,function(e){var n=e.x,t=e.y,i=e.value,o=e.activePlayer;E.activePlayer=o,E.chessboard[n][t]=i;var r=THREE.ImageUtils.loadTexture("/assets/textures/general/black.jpg"),a=THREE.ImageUtils.loadTexture("/assets/textures/general/white.jpg"),s="0,"+n+","+t;c.children.find(function(e){return e instanceof THREE.Mesh&&e.name==s}).material.map=1==i?a:r}),s(i,a.GAME_MESSAGE.GAME_FINISH,function(e){var n=e.msg;alert(n),p=2}),i)});function _(e,n,t){var i=THREE.ImageUtils.loadTexture("/assets/textures/general/"+n+".jpg"),o=new THREE.MeshLambertMaterial({color:7829503});return o.side=THREE.FrontSide,o.map=i,o.ID=n,t&&E.roles[n]&&"audience"!=n&&(o.transparent=!0,o.opacity=.1),new THREE.Mesh(e,o)}function R(e,n){var t=_(new THREE.BoxGeometry(4,4,4,1,1,1),n,!0);return t.name=n,t.receiveShadow=!0,t.rotation.x=.5*Math.PI,t.rotation.z=-.5*Math.PI,t.position.x=e.x,t.position.y=e.y,t.position.z=e.z,t}function m(e,n){var t=_(new THREE.BoxGeometry(40,40,40,1,1,1),n);return t.receiveShadow=!0,t.rotation.x=.5*Math.PI,t.rotation.z=-.5*Math.PI,t.position.x=e.x,t.position.y=e.y,t.position.z=e.z,t}function S(e){if(E.roles.playerA){var n=m(new THREE.Vector3(-160,20,0),"playerA");e.add(n)}if(E.roles.playerB){var t=m(new THREE.Vector3(160,20,0),"playerB");e.add(t)}}function T(e){return e.playerA==window.__USER_ID__?"playerA":e.playerB==window.__USER_ID__?"playerB":e.audience.includes(window.__USER_ID__)?"audience":""}function A(e,n){var t=[];if(e)t=function(e){var n=[],t=new THREE.BoxGeometry(6,6,6),i=THREE.ImageUtils.loadTexture("/assets/textures/general/black.jpg"),o=THREE.ImageUtils.loadTexture("/assets/textures/general/white.jpg"),r=THREE.ImageUtils.loadTexture("/assets/textures/general/empty.jpg");return E.chessboard.forEach(function(a,s){a.forEach(function(c,l){var d=new THREE.MeshLambertMaterial;d.color=new THREE.Color(0,0,0),0==s||0==l||s==E.chessboard.length-1||l==a.length-1?(d.map="",d.color="0x000000"):1==c.value?d.map=o:2==c.value?d.map=i:d.map=r,d.side=THREE.FrontSide;var p=new THREE.Mesh(t,d);p.position.z=6*l-120,p.position.x=6*s-120,p.position.y=2,p.name=c.value+","+s+","+l,n.push(p),e.add(p)})}),n}(n),S(n);else{var i=R(new THREE.Vector3(0,0,5),"playerA"),o=R(new THREE.Vector3(0,0,0),"playerB"),r=R(new THREE.Vector3(0,0,-5),"audience");n.add(i),n.add(o),n.add(r),t=[i,o,r]}return t}function v(e,n){var t="";return e?"playerA"==e?((t=new THREE.PerspectiveCamera(45,window.innerWidth/window.innerHeight,.1,1e3)).position.x=-240,t.position.y=200,t.position.z=0,t.lookAt(new THREE.Vector3(0,0,0))):"playerB"==e?((t=new THREE.PerspectiveCamera(45,window.innerWidth/window.innerHeight,.1,1e3)).position.x=240,t.position.y=200,t.position.z=0,t.lookAt(new THREE.Vector3(0,0,0))):"audience"==e&&((t=new THREE.OrthographicCamera(window.innerWidth/-8,window.innerWidth/8,window.innerHeight/16,window.innerHeight/-16,-200,500)).position.x=0,t.position.y=60,t.position.z=160,t.lookAt(new THREE.Vector3(0,0,0))):((t=new THREE.PerspectiveCamera(45,window.innerWidth/window.innerHeight,.1,1e3)).position.x=0,t.position.y=-20,t.position.z=0,t.lookAt(n.position)),t}function H(){w.update(),requestAnimationFrame(H),d.render(c,l)}function g(e){new THREE.Projector;document.addEventListener("mousedown",function(n){var t=new THREE.Vector3(n.clientX/window.innerWidth*2-1,-n.clientY/window.innerHeight*2+1,.5);t=t.unproject(l);var i=new THREE.Raycaster(l.position,t.sub(l.position).normalize()).intersectObjects(u);if(i.length>0)if(e){if("audience"!=e&&1==p){var o=i[0].object;if(!o)return;var r=o.name.split(",");if("0"!=r[0])return;h(a.GAME_MESSAGE.GAME_PLAY_CHESS,{x:r[1],y:r[2],player:e})}}else.1!=i[0].object.material.opacity?(i[0].object.material.transparent=!0,i[0].object.material.opacity=.1,h(a.GAME_MESSAGE.GAME_SELECT_ROLE,{role:i[0].object.name})):alert("角色不可选")},!1)}function M(e){if("audience"==e){var n=new function(){this.perspective="Perspective",this.positionX=0,this.positionY=60,this.positionZ=160,this.changeCameraPosition=function(){l.position.x=n.positionX,l.position.y=n.positionY,l.position.z=n.positionZ},this.switchCamera=function(){l instanceof THREE.PerspectiveCamera?((l=new THREE.OrthographicCamera(window.innerWidth/-8,window.innerWidth/8,window.innerHeight/16,window.innerHeight/-16,-200,500)).position.x=n.positionX,l.position.y=n.positionY,l.position.z=n.positionZ,l.lookAt(new THREE.Vector3(0,0,0)),this.perspective="Orthographic"):((l=new THREE.PerspectiveCamera(45,window.innerWidth/window.innerHeight,.1,1e3)).position.x=n.positionX,l.position.y=n.positionY,l.position.z=n.positionZ,l.lookAt(new THREE.Vector3(0,0,0)),this.perspective="Perspective")}},t=new dat.GUI;t.add(n,"switchCamera"),t.add(n,"positionX",0,1e3).onChange(n.changeCameraPosition),t.add(n,"positionY",0,1e3).onChange(n.changeCameraPosition),t.add(n,"positionZ",0,1e3).onChange(n.changeCameraPosition),t.add(n,"perspective").listen()}}},"./static/public/socket.js":
/*!*********************************!*\
  !*** ./static/public/socket.js ***!
  \*********************************/
/*! no static exports found */function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(n,t,i){return t&&e(n.prototype,t),i&&e(n,i),n}}(),o=function(e){return e&&e.__esModule?e:{default:e}}(t(/*! socket.io-client */"./node_modules/socket.io-client/lib/index.js"));var r=function(){function e(n){var t=n.events;if(function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),this.client=new o.default,!this.client)return null;t&&this.addEvent(t)}return i(e,[{key:"addEvent",value:function(e){var n=this;try{Object.entries(e).map(function(e){n.client.on.apply(n.client,e)})}catch(e){throw"add events error"}}}]),e}();n.default=r},0:
/*!********************!*\
  !*** ws (ignored) ***!
  \********************/
/*! no static exports found */function(e,n){}},[["./static/index.js","manifest","chunk-vendor"]]]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9jb25maWcvY29uc3RDb25maWcuanMiLCJ3ZWJwYWNrOi8vLy4vc3RhdGljL2luZGV4LmpzIiwid2VicGFjazovLy8uL3N0YXRpYy9wdWJsaWMvc29ja2V0LmpzIl0sIm5hbWVzIjpbImV4cG9ydHMiLCJSRURJU19NRVNTQUdFIiwiU0hBUkVfTUVTU0FHRSIsIktFWSIsIkVWRU5UIiwiQ09OVEVOVCIsIkhBUFBZX1JFQ09SRCIsIkhPU1RfVVJMIiwiR0FNRV9NRVNTQUdFIiwiR0FNRV9JTklUIiwiUkVESVNfUkVBRFkiLCJHQU1FX1NFTEVDVF9ST0xFIiwiR0FNRV9QTEFZX0NIRVNTIiwiR0FNRV9TVEFSVCIsIkdBTUVfRklOSVNIIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIl9jb25zdENvbmZpZyIsImdhbWVEYXRhIiwic2NlbmUiLCJjYW1lcmEiLCJyZW5kZXJlciIsImdhbWVTdGF0dXMiLCJtZXNocyIsInN0YXRzIiwic2VuZCIsImtleSIsInZhbHVlIiwiYXJndW1lbnRzIiwibGVuZ3RoIiwidW5kZWZpbmVkIiwibWVzc2FnZSIsIm5hbWUiLCJudW1iZXIiLCJ3aW5kb3ciLCJfX0dBTUVfTlVNQkVSX18iLCJ1aWQiLCJfX1VTRVJfSURfXyIsInNvY2tldFNlcnZlciIsImNsaWVudCIsImVtaXQiLCJfZXh0ZW5kcyIsIlNvY2tldFNlcnZlciIsImV2ZW50cyIsImNvbm5lY3QiLCJjb25zb2xlIiwibG9nIiwiX2RlZmluZVByb3BlcnR5IiwiX2V2ZW50cyIsImluaXREYXRhIiwiSlNPTiIsInBhcnNlIiwic3RhdHVzIiwicm9sZSIsIlN0YXRzIiwic2V0TW9kZSIsImRvbUVsZW1lbnQiLCJzdHlsZSIsInBvc2l0aW9uIiwibGVmdCIsInRvcCIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJhcHBlbmRDaGlsZCIsImluaXRTdGF0cyIsIlRIUkVFIiwiU2NlbmUiLCJpbml0Q2FtZXJhIiwiaW5pdE1lc2giLCJXZWJHTFJlbmRlcmVyIiwic2V0Q2xlYXJDb2xvciIsIkNvbG9yIiwic2V0U2l6ZSIsImlubmVyV2lkdGgiLCJpbm5lckhlaWdodCIsInNoYWRvd01hcEVuYWJsZWQiLCJhbWJpZW50TGlnaHQiLCJBbWJpZW50TGlnaHQiLCJhZGQiLCJwb2ludExpZ2h0IiwiUG9pbnRMaWdodCIsInNldCIsImRpc3RhbmNlIiwiY3JlYXRlR1VJIiwicmVuZGVyIiwiYmluZEV2ZW50IiwiaW5pdCIsImNoZWNrUm9sZSIsInJvbGVzIiwiX3JlZiIsImNhblN0YXJ0Iiwic3RhcnQiLCJjcmVhdGVQbGF5ZXJzIiwiX3JlZjIiLCJ4IiwieSIsImFjdGl2ZVBsYXllciIsImNoZXNzYm9hcmQiLCJ0ZXh0dXJlQmxhY2siLCJJbWFnZVV0aWxzIiwibG9hZFRleHR1cmUiLCJ0ZXh0dXJlV2hpdGUiLCJjaGlsZHJlbiIsImZpbmQiLCJvYmoiLCJNZXNoIiwibWF0ZXJpYWwiLCJtYXAiLCJfcmVmMyIsIm1zZyIsImFsZXJ0IiwiY3JlYXRlUm9sZU1lc2giLCJnZW9tIiwidHJhbnNwYXJlbnQiLCJ0ZXh0dXJlIiwibWVzaE1hdGVyaWFsIiwiTWVzaExhbWJlcnRNYXRlcmlhbCIsImNvbG9yIiwic2lkZSIsIkZyb250U2lkZSIsIklEIiwib3BhY2l0eSIsImNyZWF0ZVJvbGVDYXJkIiwiY2FyZCIsIkJveEdlb21ldHJ5IiwicmVjZWl2ZVNoYWRvdyIsInJvdGF0aW9uIiwiTWF0aCIsIlBJIiwieiIsImNyZWF0ZVBsYXllclJvbGUiLCJyb2xlbmFtZSIsInBsYXllckEiLCJWZWN0b3IzIiwicGxheWVyQiIsImF1ZGllbmNlIiwiaW5jbHVkZXMiLCJjdWJlcyIsImN1YmVHZW9tZXRyeSIsInRleHR1cmVFbXB0eSIsImZvckVhY2giLCJib3hzIiwiaSIsImJveCIsImoiLCJjdWJlTWF0ZXJpYWwiLCJjdWJlIiwicHVzaCIsImNyZWF0ZUNoZXNzYm9hcmQiLCJQZXJzcGVjdGl2ZUNhbWVyYSIsImxvb2tBdCIsIk9ydGhvZ3JhcGhpY0NhbWVyYSIsInVwZGF0ZSIsInJlcXVlc3RBbmltYXRpb25GcmFtZSIsIlByb2plY3RvciIsImFkZEV2ZW50TGlzdGVuZXIiLCJldmVudCIsInZlY3RvciIsImNsaWVudFgiLCJjbGllbnRZIiwidW5wcm9qZWN0IiwiaW50ZXJzZWN0cyIsIlJheWNhc3RlciIsInN1YiIsIm5vcm1hbGl6ZSIsImludGVyc2VjdE9iamVjdHMiLCJtZXNoIiwib2JqZWN0IiwiZGF0YXMiLCJzcGxpdCIsInBsYXllciIsImNvbnRyb2xzIiwidGhpcyIsInBlcnNwZWN0aXZlIiwicG9zaXRpb25YIiwicG9zaXRpb25ZIiwicG9zaXRpb25aIiwiY2hhbmdlQ2FtZXJhUG9zaXRpb24iLCJzd2l0Y2hDYW1lcmEiLCJndWkiLCJkYXQiLCJHVUkiLCJvbkNoYW5nZSIsImxpc3RlbiIsIlNva2NldFNlcnZlciIsIl9jbGFzc0NhbGxDaGVjayIsInNvY2tldENsaWVudCIsImFkZEV2ZW50IiwiX3RoaXMiLCJPYmplY3QiLCJlbnRyaWVzIiwib24iLCJhcHBseSIsImUiXSwibWFwcGluZ3MiOiI7Ozs7NENBUUFBLEVBQUFDLGVBUEFDLGVBQ0FDLElBQUEsb0JBQ0FDLE1BQUEsc0JBQ0FDLFFBQUEsK0JBVUFMLEVBQUFNLGNBSEFDLFNBQUEseUJBTUFQLEVBQUFRLGNBQ0FDLFVBQUEsWUFDQUMsWUFBQSxjQUNBQyxpQkFBQSxtQkFDQUMsZ0JBQUEsbUJBQ0FDLFdBQUEsYUFDQUMsWUFBQTs7Ozt5UkN2QkFDLHdCQUFBLDhCQUNBQyxFQUFBRCw4QkFBQSxtSkFDQSxJQUFJRSxLQUNBQyxFQUFRLEtBQ1JDLEVBQVMsS0FDVEMsRUFBVyxLQUNYQyxFQUFhLEVBQ2JDLEtBQ0FDLEVBQVEsS0FNTkMsRUFBTyxTQUFDQyxHQUFlLElBQVhDLEVBQVdDLFVBQUFDLE9BQUEsUUFBQUMsSUFBQUYsVUFBQSxHQUFBQSxVQUFBLE1BQ3ZCRyxHQUFXQyxLQUFLLFNBQVNDLE9BQU9DLE9BQU9DLGdCQUFnQkMsSUFBSUYsT0FBT0csYUFDdEVDLEVBQWFDLE9BQU9DLEtBQUtkLEVB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QyxPQUVULCtGQUZpQjhJLENBQUFiLEtBQUFZLEdBQ2pCWixLQUFLckksT0FBUyxJQUFJbUosV0FDZGQsS0FBS3JJLE9BQ0wsT0FBTyxLQUVSSSxHQUNDaUksS0FBS2UsU0FBU2hKLDhDQUdiQSxHQUFPLElBQUFpSixFQUFBaEIsS0FDWixJQUNJaUIsT0FBT0MsUUFBUW5KLEdBQVFnRSxJQUFJLFNBQUFpRCxHQUN2QmdDLEVBQUtySixPQUFPd0osR0FBR0MsTUFBTUosRUFBS3JKLE9BQU9xSCxLQUV4QyxNQUFNcUMsR0FDSCxLQUFNLHVDQWhCR1QiLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IFJFRElTX01FU1NBR0UgPSB7XG4gICAgU0hBUkVfTUVTU0FHRTp7XG4gICAgICAgIEtFWTonU0hBUkVfTUVTU0FHRV9LRVknLFxuICAgICAgICBFVkVOVDonU0hBUkVfTUVTU0FHRV9FVkVOVCcsXG4gICAgICAgIENPTlRFTlQ6JyVVU0VSJSAlT1BFUkFURSUgJUNPTlRFTlQlJ1xuICAgIH1cbn1cblxuZXhwb3J0cy5SRURJU19NRVNTQUdFID0gUkVESVNfTUVTU0FHRVxuXG5jb25zdCBIQVBQWV9SRUNPUkQgPSB7XG4gICAgSE9TVF9VUkw6J2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMSdcbn1cblxuZXhwb3J0cy5IQVBQWV9SRUNPUkQgPSBIQVBQWV9SRUNPUkRcblxuXG5leHBvcnRzLkdBTUVfTUVTU0FHRSA9IHtcbiAgICBHQU1FX0lOSVQ6J0dBTUVfSU5JVCcsXG4gICAgUkVESVNfUkVBRFk6J1JFRElTX1JFQURZJyxcbiAgICBHQU1FX1NFTEVDVF9ST0xFOidHQU1FX1NFTEVDVF9ST0xFJyxcbiAgICBHQU1FX1BMQVlfQ0hFU1M6J0dBTUVfUFJFU1NfQ0hFU1MnLFxuICAgIEdBTUVfU1RBUlQ6J0dBTUVfU1RBUlQnLFxuICAgIEdBTUVfRklOSVNIOidHQU1FX0ZJTklTSCdcbn0iLCJpbXBvcnQgU29ja2V0U2VydmVyIGZyb20gXCIuL3B1YmxpYy9zb2NrZXRcIlxuaW1wb3J0IHsgR0FNRV9NRVNTQUdFIH0gZnJvbSBcIi4uL2NvbmZpZy9jb25zdENvbmZpZ1wiXG5sZXQgZ2FtZURhdGEgPSB7fVxubGV0IHNjZW5lID0gbnVsbDtcbmxldCBjYW1lcmEgPSBudWxsO1xubGV0IHJlbmRlcmVyID0gbnVsbDtcbmxldCBnYW1lU3RhdHVzID0gMDsgLy/mnKrlvIDlp4tcbmxldCBtZXNocyA9IFtdO1xubGV0IHN0YXRzID0gbnVsbDtcbi8qKlxuICog5Y+R6YCB5raI5oGvXG4gKiBAcGFyYW0ge+a2iOaBr2tleX0ga2V5IFxuICogQHBhcmFtIHvmtojmga/lhoXlrrl9IHZhbHVlIFxuICovXG5jb25zdCBzZW5kID0gKGtleSx2YWx1ZT17fSk9PntcbiAgbGV0IG1lc3NhZ2UgPSB7bmFtZTond3V6aXFpJyxudW1iZXI6d2luZG93Ll9fR0FNRV9OVU1CRVJfXyx1aWQ6d2luZG93Ll9fVVNFUl9JRF9ffVxuICBzb2NrZXRTZXJ2ZXIuY2xpZW50LmVtaXQoa2V5LHsuLi5tZXNzYWdlLC4uLnZhbHVlfSlcbn1cbi8qKlxuICog5Yib5bu6c29ja2V0IOexu1xuICovXG5jb25zdCBzb2NrZXRTZXJ2ZXIgPSBuZXcgU29ja2V0U2VydmVyKHtcbiAgZXZlbnRzOntcbiAgICAnY29ubmVjdCc6KCk9PntcbiAgICAgIGNvbnNvbGUubG9nKCdjb25uZWN0JylcbiAgICB9LFxuICAgIFtHQU1FX01FU1NBR0UuUkVESVNfUkVBRFldOihtZXNzYWdlKT0+e1xuICAgICAgc2VuZChHQU1FX01FU1NBR0UuR0FNRV9JTklUKVxuICAgIH0sXG4gICAgW0dBTUVfTUVTU0FHRS5HQU1FX0lOSVRdOihpbml0RGF0YSk9PntcbiAgICAgIGdhbWVEYXRhID0gdHlwZW9mIGluaXREYXRhID09ICdzdHJpbmcnP0pTT04ucGFyc2UoaW5pdERhdGEpOmluaXREYXRhXG4gICAgICBnYW1lU3RhdHVzID0gZ2FtZURhdGEuc3RhdHVzXG4gICAgICBpbml0KGNoZWNrUm9sZShnYW1lRGF0YS5yb2xlcykpXG4gICAgfSxcbiAgICBbR0FNRV9NRVNTQUdFLkdBTUVfU0VMRUNUX1JPTEVdOih7c3RhdHVzLHJvbGUsY2FuU3RhcnQsdWlkfSk9PntcbiAgICAgIGlmKHN0YXR1cyl7XG4gICAgICAgIGlmKHJvbGUgPT0gJ3BsYXllckEnIHx8IHJvbGUgPT0gJ3BsYXllckInKVxuICAgICAgICBnYW1lU3RhdHVzID0gY2FuU3RhcnQ/MTowXG4gICAgICAgIGdhbWVEYXRhLnJvbGVzW3JvbGVdID0gdWlkXG4gICAgICAgIGlmKHdpbmRvdy5fX1VTRVJfSURfXyA9PSB1aWQpe1xuICAgICAgICAgIHN0YXJ0KHJvbGUpXG4gICAgICAgIH1lbHNlIGlmKGNoZWNrUm9sZShnYW1lRGF0YS5yb2xlcykpe1xuICAgICAgICAgIGNyZWF0ZVBsYXllcnMoc2NlbmUpXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICB9XG4gICAgfSxcbiAgICBbR0FNRV9NRVNTQUdFLkdBTUVfUExBWV9DSEVTU106KHt4LHksdmFsdWUsYWN0aXZlUGxheWVyfSk9PntcbiAgICAgIGdhbWVEYXRhLmFjdGl2ZVBsYXllciA9IGFjdGl2ZVBsYXllclxuICAgICAgZ2FtZURhdGEuY2hlc3Nib2FyZFt4XVt5XSA9IHZhbHVlXG4gICAgICBsZXQgdGV4dHVyZUJsYWNrID0gVEhSRUUuSW1hZ2VVdGlscy5sb2FkVGV4dHVyZShcIi9hc3NldHMvdGV4dHVyZXMvZ2VuZXJhbC9ibGFjay5qcGdcIik7XG4gICAgICBsZXQgdGV4dHVyZVdoaXRlID0gVEhSRUUuSW1hZ2VVdGlscy5sb2FkVGV4dHVyZShcIi9hc3NldHMvdGV4dHVyZXMvZ2VuZXJhbC93aGl0ZS5qcGdcIik7XG4gICAgICBsZXQgbmFtZSA9ICcwLCcreCsnLCcreTtcbiAgICAgIGxldCBtZXNoID0gc2NlbmUuY2hpbGRyZW4uZmluZCgob2JqKT0+e1xuICAgICAgICAgaWYob2JqIGluc3RhbmNlb2YgVEhSRUUuTWVzaCAmJiBvYmoubmFtZSA9PSBuYW1lKXtcbiAgICAgICAgICAgIHJldHVybiB0cnVlXG4gICAgICAgICB9XG4gICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgIH0pXG4gICAgICBtZXNoLm1hdGVyaWFsLm1hcCA9IHZhbHVlID09IDE/dGV4dHVyZVdoaXRlOnRleHR1cmVCbGFja1xuICAgIH0sXG4gICAgW0dBTUVfTUVTU0FHRS5HQU1FX0ZJTklTSF06KHttc2d9KT0+e1xuICAgICAgYWxlcnQobXNnKVxuICAgICAgZ2FtZVN0YXR1cyA9IDI7XG4gICAgfVxuICB9XG59KTtcbi8qKlxuICog5Yib5bu66KeS6Imy5Y2h54mH572R5qC8XG4gKiBAcGFyYW0ge+S9jee9rn0gcG9zaXRpb24gXG4gKiBAcGFyYW0ge+inkuiJsn0gcm9sZSBcbiAqL1xuZnVuY3Rpb24gY3JlYXRlUm9sZU1lc2goZ2VvbSxyb2xlLHRyYW5zcGFyZW50KSB7XG5cbiAgdmFyIHRleHR1cmUgPSBUSFJFRS5JbWFnZVV0aWxzLmxvYWRUZXh0dXJlKFwiL2Fzc2V0cy90ZXh0dXJlcy9nZW5lcmFsL1wiICsgcm9sZSArIFwiLmpwZ1wiKTtcbiAgdmFyIG1lc2hNYXRlcmlhbCA9IG5ldyBUSFJFRS5NZXNoTGFtYmVydE1hdGVyaWFsKHtjb2xvcjogMHg3Nzc3ZmZ9KTtcbiAgbWVzaE1hdGVyaWFsLnNpZGUgPSBUSFJFRS5Gcm9udFNpZGU7Ly9USFJFRS5Eb3VibGVTaWRlXG4gIG1lc2hNYXRlcmlhbC5tYXAgPSB0ZXh0dXJlO1xuICBtZXNoTWF0ZXJpYWwuSUQgPSByb2xlO1xuICBpZih0cmFuc3BhcmVudCYmZ2FtZURhdGEucm9sZXNbcm9sZV0mJnJvbGUhPSdhdWRpZW5jZScpe1xuICAgIG1lc2hNYXRlcmlhbC50cmFuc3BhcmVudCA9IHRydWU7IC8v5piv5ZCm5Y+v5Lul6K6+572u6YCP5piO5bqmXG4gICAgbWVzaE1hdGVyaWFsLm9wYWNpdHkgPSAwLjE7ICAgICAgLy/orr7nva7pgI/mmI7luqZcbiAgfVxuICAvL+WfuuehgOadkOi0qCDlpJrnlKjkuo7nur/moYbosIPor5VcbiAgLy8gdmFyIHdpcmVGcmFtZU1hdCA9IG5ldyBUSFJFRS5NZXNoQmFzaWNNYXRlcmlhbCgpO1xuICAvLyB3aXJlRnJhbWVNYXQud2lyZWZyYW1lID0gdHJ1ZTtcblxuICAvLyDono3lkIjmnZDotKhcbiAgLy8gdmFyIG1lc2ggPSBUSFJFRS5TY2VuZVV0aWxzLmNyZWF0ZU11bHRpTWF0ZXJpYWxPYmplY3QoZ2VvbSwgW21lc2hNYXRlcmlhbCwgd2lyZUZyYW1lTWF0XSk7XG4gIHZhciBtZXNoID0gbmV3IFRIUkVFLk1lc2goZ2VvbSwgbWVzaE1hdGVyaWFsKTtcbiAgcmV0dXJuIG1lc2g7XG59XG4vKipcbiAqIOWIm+W7uuinkuiJsuWNoeeJh1xuICogQHBhcmFtIHvkvY3nva59IHBvc2l0aW9uIFxuICogQHBhcmFtIHvop5LoibJ9IHJvbGUgXG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZVJvbGVDYXJkKHBvc2l0aW9uLHJvbGUpe1xuICAgIC8vIGNyZWF0ZSB0aGUgZ3JvdW5kIHBsYW5lXG4gICAgdmFyIGNhcmRHZW9tZXRyeSA9IG5ldyBUSFJFRS5Cb3hHZW9tZXRyeSg0LCA0LCA0LDEsIDEsMSk7XG4gICAgdmFyIGNhcmQgPSBjcmVhdGVSb2xlTWVzaChjYXJkR2VvbWV0cnkscm9sZSx0cnVlKTtcbiAgICBjYXJkLm5hbWUgPSByb2xlO1xuICAgIC8vIHZhciBwbGFuZSA9IG5ldyBUSFJFRS5NZXNoKHBsYW5lR2VvbWV0cnksIHBsYW5lTWF0ZXJpYWwpO1xuICAgIGNhcmQucmVjZWl2ZVNoYWRvdyA9IHRydWU7XG4gICAgLy8gcm90YXRlIGFuZCBwb3NpdGlvbiB0aGUgcGxhbmVcbiAgICBjYXJkLnJvdGF0aW9uLnggPSAwLjUgKiBNYXRoLlBJO1xuICAgIGNhcmQucm90YXRpb24ueiA9IC0wLjUgKiBNYXRoLlBJO1xuICAgIGNhcmQucG9zaXRpb24ueCA9IHBvc2l0aW9uLng7XG4gICAgY2FyZC5wb3NpdGlvbi55ID0gcG9zaXRpb24ueTtcbiAgICBjYXJkLnBvc2l0aW9uLnogPSBwb3NpdGlvbi56O1xuICAgIHJldHVybiBjYXJkXG59XG4vKipcbiAqIOWIm+W7uuaji+ebmFxuICogQHBhcmFtIHvlnLrmma99IHNjZW5lIFxuICovXG5mdW5jdGlvbiBjcmVhdGVDaGVzc2JvYXJkKHNjZW5lKXtcbiAgdmFyIGN1YmVzID0gW11cbiAgdmFyIGN1YmVHZW9tZXRyeSA9IG5ldyBUSFJFRS5Cb3hHZW9tZXRyeSg2LCA2LCA2KTtcbiAgdmFyIHRleHR1cmVCbGFjayA9IFRIUkVFLkltYWdlVXRpbHMubG9hZFRleHR1cmUoXCIvYXNzZXRzL3RleHR1cmVzL2dlbmVyYWwvYmxhY2suanBnXCIpO1xuICB2YXIgdGV4dHVyZVdoaXRlID0gVEhSRUUuSW1hZ2VVdGlscy5sb2FkVGV4dHVyZShcIi9hc3NldHMvdGV4dHVyZXMvZ2VuZXJhbC93aGl0ZS5qcGdcIik7XG4gIHZhciB0ZXh0dXJlRW1wdHkgPSBUSFJFRS5JbWFnZVV0aWxzLmxvYWRUZXh0dXJlKFwiL2Fzc2V0cy90ZXh0dXJlcy9nZW5lcmFsL2VtcHR5LmpwZ1wiKTtcbiAgZ2FtZURhdGEuY2hlc3Nib2FyZC5mb3JFYWNoKChib3hzLGkpPT57XG4gICAgICBib3hzLmZvckVhY2goKGJveCxqKT0+e1xuICAgICAgICAgIHZhciBjdWJlTWF0ZXJpYWwgPSBuZXcgVEhSRUUuTWVzaExhbWJlcnRNYXRlcmlhbCgpO1xuICAgICAgICAgIGN1YmVNYXRlcmlhbC5jb2xvciA9IG5ldyBUSFJFRS5Db2xvcigwLCAwLCAwKTtcbiAgICAgICAgICBpZihpPT0wIHx8IGo9PTAgfHwgaT09KGdhbWVEYXRhLmNoZXNzYm9hcmQubGVuZ3RoLTEpIHx8IGo9PShib3hzLmxlbmd0aC0xKSl7XG4gICAgICAgICAgICBjdWJlTWF0ZXJpYWwubWFwID0gJydcbiAgICAgICAgICAgIGN1YmVNYXRlcmlhbC5jb2xvciA9ICcweDAwMDAwMCdcbiAgICAgICAgICB9XG4gICAgICAgICAgZWxzZSBpZihib3gudmFsdWUgPT0gMSl7XG4gICAgICAgICAgICBjdWJlTWF0ZXJpYWwubWFwID0gdGV4dHVyZVdoaXRlXG4gICAgICAgICAgfWVsc2UgaWYoYm94LnZhbHVlID09IDIpe1xuICAgICAgICAgICAgY3ViZU1hdGVyaWFsLm1hcCA9IHRleHR1cmVCbGFja1xuICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgY3ViZU1hdGVyaWFsLm1hcCA9IHRleHR1cmVFbXB0eVxuICAgICAgICAgIH1cbiAgICAgICAgICBjdWJlTWF0ZXJpYWwuc2lkZSA9IFRIUkVFLkZyb250U2lkZTsvL1RIUkVFLkRvdWJsZVNpZGVcbiAgICAgICAgICB2YXIgY3ViZSA9IG5ldyBUSFJFRS5NZXNoKGN1YmVHZW9tZXRyeSwgY3ViZU1hdGVyaWFsKTtcblxuICAgICAgICAgIGN1YmUucG9zaXRpb24ueiA9IC0oKDI0MCkgLyAyKSArIChqICogNik7XG4gICAgICAgICAgY3ViZS5wb3NpdGlvbi54ID0gLSgoMjQwKSAvIDIpICsgKGkgKiA2KTtcbiAgICAgICAgICBjdWJlLnBvc2l0aW9uLnkgPSAyO1xuICAgICAgICAgIGN1YmUubmFtZSA9IGJveC52YWx1ZSArICcsJyArIGkgKyAnLCcgKyBqXG4gICAgICAgICAgY3ViZXMucHVzaChjdWJlKVxuICAgICAgICAgIHNjZW5lLmFkZChjdWJlKTtcbiAgICAgIH0pXG4gIH0pXG4gIHJldHVybiBjdWJlc1xufVxuLyoqXG4gKiDliJvlu7rop5LoibLlvaLosaFcbiAqIEBwYXJhbSB76KeS6Imy5L2N572ufSBwb3NpdGlvbiBcbiAqIEBwYXJhbSB76KeS6Imy5ZCNfSByb2xlbmFtZSBcbiAqL1xuZnVuY3Rpb24gY3JlYXRlUGxheWVyUm9sZShwb3NpdGlvbixyb2xlbmFtZSl7XG4gICAgdmFyIHJvbGVHZW9tZXRyeSA9IG5ldyBUSFJFRS5Cb3hHZW9tZXRyeSg0MCwgNDAsIDQwLDEsIDEsMSk7XG4gICAgdmFyIHJvbGUgPSBjcmVhdGVSb2xlTWVzaChyb2xlR2VvbWV0cnkscm9sZW5hbWUpO1xuICAgIC8vIHZhciBwbGFuZSA9IG5ldyBUSFJFRS5NZXNoKHBsYW5lR2VvbWV0cnksIHBsYW5lTWF0ZXJpYWwpO1xuICAgIHJvbGUucmVjZWl2ZVNoYWRvdyA9IHRydWU7XG4gICAgLy8gcm90YXRlIGFuZCBwb3NpdGlvbiB0aGUgcGxhbmVcbiAgICByb2xlLnJvdGF0aW9uLnggPSAwLjUgKiBNYXRoLlBJO1xuICAgIHJvbGUucm90YXRpb24ueiA9IC0wLjUgKiBNYXRoLlBJO1xuICAgIHJvbGUucG9zaXRpb24ueCA9IHBvc2l0aW9uLng7XG4gICAgcm9sZS5wb3NpdGlvbi55ID0gcG9zaXRpb24ueTtcbiAgICByb2xlLnBvc2l0aW9uLnogPSBwb3NpdGlvbi56O1xuICAgIHJldHVybiByb2xlXG59XG4vKipcbiAqIOWIm+W7uueOqeWutlxuICogQHBhcmFtIHsqfSBzY2VuZSBcbiAqL1xuZnVuY3Rpb24gY3JlYXRlUGxheWVycyhzY2VuZSl7XG4gIGlmKGdhbWVEYXRhLnJvbGVzWydwbGF5ZXJBJ10pe1xuICAgIHZhciBwbGF5ZXJBID0gY3JlYXRlUGxheWVyUm9sZShuZXcgVEhSRUUuVmVjdG9yMygtMTYwLCAyMCwgMCksJ3BsYXllckEnKVxuICAgIHNjZW5lLmFkZChwbGF5ZXJBKTtcbiAgfVxuICBpZihnYW1lRGF0YS5yb2xlc1sncGxheWVyQiddKXtcbiAgICB2YXIgcGxheWVyQiA9IGNyZWF0ZVBsYXllclJvbGUobmV3IFRIUkVFLlZlY3RvcjMoMTYwLCAyMCwgMCksJ3BsYXllckInKVxuICAgIHNjZW5lLmFkZChwbGF5ZXJCKTtcbiAgfVxufVxuLyoqXG4gKiDmo4Dmn6XnlKjmiLfop5LoibJcbiAqIEBwYXJhbSB7Kn0gcm9sZXMgXG4gKi9cbmZ1bmN0aW9uIGNoZWNrUm9sZShyb2xlcyl7XG4gICAgaWYocm9sZXMucGxheWVyQSA9PSB3aW5kb3cuX19VU0VSX0lEX18pe1xuICAgICAgcmV0dXJuICdwbGF5ZXJBJ1xuICAgIH1cbiAgICBpZihyb2xlcy5wbGF5ZXJCID09IHdpbmRvdy5fX1VTRVJfSURfXyl7XG4gICAgICByZXR1cm4gJ3BsYXllckInXG4gICAgfVxuICAgIGlmKHJvbGVzLmF1ZGllbmNlLmluY2x1ZGVzKHdpbmRvdy5fX1VTRVJfSURfXykpe1xuICAgICAgcmV0dXJuICdhdWRpZW5jZSdcbiAgICB9XG4gICAgcmV0dXJuICcnXG59XG4vKipcbiAqIOWIneWni+WMlue9keagvFxuICogQHBhcmFtIHsqfSByb2xlIFxuICogQHBhcmFtIHsqfSBzY2VuZSBcbiAqL1xuZnVuY3Rpb24gaW5pdE1lc2gocm9sZSxzY2VuZSl7XG4gICB2YXIgbWVzaHMgPSBbXVxuICAgaWYoIXJvbGUpe1xuICAgICAgdmFyIHBsYXllckEgPSBjcmVhdGVSb2xlQ2FyZChuZXcgVEhSRUUuVmVjdG9yMygwLCAwLCA1KSwncGxheWVyQScpXG4gICAgICB2YXIgcGxheWVyQiA9IGNyZWF0ZVJvbGVDYXJkKG5ldyBUSFJFRS5WZWN0b3IzKDAsIDAsIDApLCdwbGF5ZXJCJylcbiAgICAgIHZhciBhdWRpZW5jZSA9IGNyZWF0ZVJvbGVDYXJkKG5ldyBUSFJFRS5WZWN0b3IzKDAsIDAsIC01KSwnYXVkaWVuY2UnKVxuICAgICAgc2NlbmUuYWRkKHBsYXllckEpO1xuICAgICAgc2NlbmUuYWRkKHBsYXllckIpO1xuICAgICAgc2NlbmUuYWRkKGF1ZGllbmNlKTtcbiAgICAgIG1lc2hzID0gW3BsYXllckEscGxheWVyQixhdWRpZW5jZV1cbiAgIH1lbHNle1xuICAgIG1lc2hzID0gY3JlYXRlQ2hlc3Nib2FyZChzY2VuZSlcbiAgICBjcmVhdGVQbGF5ZXJzKHNjZW5lKVxuICAgfVxuICAgcmV0dXJuIG1lc2hzXG59XG4vKipcbiAqIOWIneWni+WMluebuOaculxuICogQHBhcmFtIHsqfSByb2xlIFxuICogQHBhcmFtIHsqfSBzY2VuZSBcbiAqL1xuZnVuY3Rpb24gaW5pdENhbWVyYShyb2xlLHNjZW5lKXtcbiAgIGxldCBjYW1lcmEgPSAnJ1xuICAgaWYoIXJvbGUpe1xuICAgICAvLyBjcmVhdGUgYSBjYW1lcmEsIHdoaWNoIGRlZmluZXMgd2hlcmUgd2UncmUgbG9va2luZyBhdC5cbiAgICAgIGNhbWVyYSA9IG5ldyBUSFJFRS5QZXJzcGVjdGl2ZUNhbWVyYSg0NSwgd2luZG93LmlubmVyV2lkdGggLyB3aW5kb3cuaW5uZXJIZWlnaHQsIDAuMSwgMTAwMCk7XG4gICAgICAvLyBwb3NpdGlvbiBhbmQgcG9pbnQgdGhlIGNhbWVyYSB0byB0aGUgY2VudGVyIG9mIHRoZSBzY2VuZVxuICAgICAgY2FtZXJhLnBvc2l0aW9uLnggPSAwO1xuICAgICAgY2FtZXJhLnBvc2l0aW9uLnkgPSAtMjA7XG4gICAgICBjYW1lcmEucG9zaXRpb24ueiA9IDA7XG4gICAgICBjYW1lcmEubG9va0F0KHNjZW5lLnBvc2l0aW9uKTtcbiAgIH1lbHNlIGlmKHJvbGUgPT0gJ3BsYXllckEnKXtcbiAgICAgIC8vIGNhbWVyYSA9IG5ldyBUSFJFRS5PcnRob2dyYXBoaWNDYW1lcmEod2luZG93LmlubmVyV2lkdGggLyAtMTQsIHdpbmRvdy5pbm5lcldpZHRoIC8gMTQsIHdpbmRvdy5pbm5lckhlaWdodCAvIDgsIHdpbmRvdy5pbm5lckhlaWdodCAvIC0xMCwtNDAwLCA4MDApO1xuICAgICAgY2FtZXJhID0gbmV3IFRIUkVFLlBlcnNwZWN0aXZlQ2FtZXJhKDQ1LCB3aW5kb3cuaW5uZXJXaWR0aCAvIHdpbmRvdy5pbm5lckhlaWdodCwgMC4xLCAxMDAwKTtcbiAgICAgIGNhbWVyYS5wb3NpdGlvbi54ID0gLTI0MDtcbiAgICAgIGNhbWVyYS5wb3NpdGlvbi55ID0gMjAwO1xuICAgICAgY2FtZXJhLnBvc2l0aW9uLnogPSAwO1xuICAgICAgY2FtZXJhLmxvb2tBdChuZXcgVEhSRUUuVmVjdG9yMygwLDAsMCkpO1xuICAgfWVsc2UgaWYocm9sZSA9PSAncGxheWVyQicpe1xuICAgIC8vIGNhbWVyYSA9IG5ldyBUSFJFRS5PcnRob2dyYXBoaWNDYW1lcmEod2luZG93LmlubmVyV2lkdGggLyAtMTQsIHdpbmRvdy5pbm5lcldpZHRoIC8gMTQsIHdpbmRvdy5pbm5lckhlaWdodCAvIDgsIHdpbmRvdy5pbm5lckhlaWdodCAvIC0xMCwtNDAwLCA4MDApO1xuICAgIGNhbWVyYSA9IG5ldyBUSFJFRS5QZXJzcGVjdGl2ZUNhbWVyYSg0NSwgd2luZG93LmlubmVyV2lkdGggLyB3aW5kb3cuaW5uZXJIZWlnaHQsIDAuMSwgMTAwMCk7XG4gICAgY2FtZXJhLnBvc2l0aW9uLnggPSAyNDA7XG4gICAgY2FtZXJhLnBvc2l0aW9uLnkgPSAyMDA7XG4gICAgY2FtZXJhLnBvc2l0aW9uLnogPSAwO1xuICAgIGNhbWVyYS5sb29rQXQobmV3IFRIUkVFLlZlY3RvcjMoMCwwLDApKTtcbiAgIH1lbHNlIGlmKHJvbGUgPT0gJ2F1ZGllbmNlJyl7XG4gICAgY2FtZXJhID0gbmV3IFRIUkVFLk9ydGhvZ3JhcGhpY0NhbWVyYSh3aW5kb3cuaW5uZXJXaWR0aCAvIC04LCB3aW5kb3cuaW5uZXJXaWR0aCAvIDgsIHdpbmRvdy5pbm5lckhlaWdodCAvIDE2LCB3aW5kb3cuaW5uZXJIZWlnaHQgLyAtMTYsIC0yMDAsIDUwMCk7XG4gICAgY2FtZXJhLnBvc2l0aW9uLnggPSAwO1xuICAgIGNhbWVyYS5wb3NpdGlvbi55ID0gNjA7XG4gICAgY2FtZXJhLnBvc2l0aW9uLnogPSAxNjA7XG4gICAgICBjYW1lcmEubG9va0F0KG5ldyBUSFJFRS5WZWN0b3IzKDAsMCwwKSk7XG4gIH1cbiAgIHJldHVybiBjYW1lcmFcbn1cbi8qKlxuICog5byA5aeL5ri45oiPXG4gKiBAcGFyYW0geyp9IHJvbGUgXG4gKi9cbmZ1bmN0aW9uIHN0YXJ0KHJvbGUpe1xuICBjYW1lcmEgPSBpbml0Q2FtZXJhKHJvbGUsc2NlbmUpXG4gIG1lc2hzID0gaW5pdE1lc2gocm9sZSxzY2VuZSlcbiAgcmVuZGVyKClcbiAgYmluZEV2ZW50KHJvbGUpXG4gIGNyZWF0ZUdVSShyb2xlKVxufVxuLyoqXG4gKiDov5DooYzmuLLmn5PlnLrmma/lkoznm7jmnLpcbiAqL1xuZnVuY3Rpb24gcmVuZGVyKCkge1xuICBzdGF0cy51cGRhdGUoKTtcbiAgLy/mjInluKfliLfmlrBcbiAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKHJlbmRlcik7XG4gIHJlbmRlcmVyLnJlbmRlcihzY2VuZSwgY2FtZXJhKTtcbn1cbi8qKlxuICog5Yid5aeL5YyWc3RhdHNcbiAqL1xuZnVuY3Rpb24gaW5pdFN0YXRzKCkge1xuXG4gIHZhciBzdGF0cyA9IG5ldyBTdGF0cygpO1xuXG4gIHN0YXRzLnNldE1vZGUoMCk7IC8vIDA6IGZwcywgMTogbXNcblxuICAvLyBBbGlnbiB0b3AtbGVmdFxuICBzdGF0cy5kb21FbGVtZW50LnN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJztcbiAgc3RhdHMuZG9tRWxlbWVudC5zdHlsZS5sZWZ0ID0gJzBweCc7XG4gIHN0YXRzLmRvbUVsZW1lbnQuc3R5bGUudG9wID0gJzBweCc7XG5cbiAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJTdGF0cy1vdXRwdXRcIikuYXBwZW5kQ2hpbGQoc3RhdHMuZG9tRWxlbWVudCk7XG5cbiAgcmV0dXJuIHN0YXRzO1xufVxuLyoqXG4gKiDnu5Hlrprngrnlh7vkuovku7ZcbiAqIEBwYXJhbSB7Kn0gcm9sZSBcbiAqL1xuZnVuY3Rpb24gYmluZEV2ZW50KHJvbGUpe1xuICB2YXIgcHJvamVjdG9yID0gbmV3IFRIUkVFLlByb2plY3RvcigpO1xuICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCBvbkRvY3VtZW50TW91c2VEb3duLCBmYWxzZSk7XG5cbiAgZnVuY3Rpb24gb25Eb2N1bWVudE1vdXNlRG93bihldmVudCkge1xuXG4gICAgICB2YXIgdmVjdG9yID0gbmV3IFRIUkVFLlZlY3RvcjMoKCBldmVudC5jbGllbnRYIC8gd2luZG93LmlubmVyV2lkdGggKSAqIDIgLSAxLCAtKCBldmVudC5jbGllbnRZIC8gd2luZG93LmlubmVySGVpZ2h0ICkgKiAyICsgMSwgMC41KTtcbiAgICAgIHZlY3RvciA9IHZlY3Rvci51bnByb2plY3QoY2FtZXJhKTtcbiAgICAgIHZhciByYXljYXN0ZXIgPSBuZXcgVEhSRUUuUmF5Y2FzdGVyKGNhbWVyYS5wb3NpdGlvbiwgdmVjdG9yLnN1YihjYW1lcmEucG9zaXRpb24pLm5vcm1hbGl6ZSgpKTtcbiAgICAgIHZhciBpbnRlcnNlY3RzID0gcmF5Y2FzdGVyLmludGVyc2VjdE9iamVjdHMobWVzaHMpO1xuICAgICAgaWYgKGludGVyc2VjdHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgIGlmKCFyb2xlKXtcbiAgICAgICAgICAgIGlmKGludGVyc2VjdHNbMF0ub2JqZWN0Lm1hdGVyaWFsLm9wYWNpdHkgIT0gMC4xKXtcbiAgICAgICAgICAgICAgaW50ZXJzZWN0c1swXS5vYmplY3QubWF0ZXJpYWwudHJhbnNwYXJlbnQgPSB0cnVlO1xuICAgICAgICAgICAgICBpbnRlcnNlY3RzWzBdLm9iamVjdC5tYXRlcmlhbC5vcGFjaXR5ID0gMC4xO1xuICAgICAgICAgICAgICBzZW5kKEdBTUVfTUVTU0FHRS5HQU1FX1NFTEVDVF9ST0xFLHtyb2xlOmludGVyc2VjdHNbMF0ub2JqZWN0Lm5hbWV9KVxuICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgIGFsZXJ0KCfop5LoibLkuI3lj6/pgIknKVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1lbHNlIGlmKHJvbGUhPSdhdWRpZW5jZScgJiYgZ2FtZVN0YXR1cyA9PSAxKXtcbiAgICAgICAgICAgIGxldCBtZXNoID0gaW50ZXJzZWN0c1swXS5vYmplY3RcbiAgICAgICAgICAgIGlmKCFtZXNoKSByZXR1cm47XG4gICAgICAgICAgICBsZXQgZGF0YXMgPSBtZXNoLm5hbWUuc3BsaXQoJywnKVxuICAgICAgICAgICAgaWYoZGF0YXNbMF0hPScwJykgcmV0dXJuXG4gICAgICAgICAgICBzZW5kKEdBTUVfTUVTU0FHRS5HQU1FX1BMQVlfQ0hFU1Mse3g6ZGF0YXNbMV0seTpkYXRhc1syXSxwbGF5ZXI6cm9sZX0pXG4gICAgICAgICAgfVxuICAgICAgfVxuICB9XG59XG4vKipcbiAqIOe7meinguS8l+inkuiJsiDphY3nva5HVUlcbiAqIEBwYXJhbSB7Kn0gcm9sZSBcbiAqL1xuZnVuY3Rpb24gY3JlYXRlR1VJKHJvbGUpe1xuICAgIGlmKHJvbGUhPSdhdWRpZW5jZScpIHJldHVyblxuICAgIHZhciBjb250cm9scyA9IG5ldyBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5wZXJzcGVjdGl2ZSA9IFwiUGVyc3BlY3RpdmVcIjtcbiAgICB0aGlzLnBvc2l0aW9uWCA9IDBcbiAgICB0aGlzLnBvc2l0aW9uWSA9IDYwXG4gICAgdGhpcy5wb3NpdGlvblogPSAxNjBcbiAgICB0aGlzLmNoYW5nZUNhbWVyYVBvc2l0aW9uID0gZnVuY3Rpb24oKXtcbiAgICAgICAgY2FtZXJhLnBvc2l0aW9uLnggPSBjb250cm9scy5wb3NpdGlvblg7XG4gICAgICAgIGNhbWVyYS5wb3NpdGlvbi55ID0gY29udHJvbHMucG9zaXRpb25ZO1xuICAgICAgICBjYW1lcmEucG9zaXRpb24ueiA9IGNvbnRyb2xzLnBvc2l0aW9uWjtcbiAgICB9XG4gICAgdGhpcy5zd2l0Y2hDYW1lcmEgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAoY2FtZXJhIGluc3RhbmNlb2YgVEhSRUUuUGVyc3BlY3RpdmVDYW1lcmEpIHtcbiAgICAgICAgICAgICAgICBjYW1lcmEgPSBuZXcgVEhSRUUuT3J0aG9ncmFwaGljQ2FtZXJhKHdpbmRvdy5pbm5lcldpZHRoIC8gLTgsIHdpbmRvdy5pbm5lcldpZHRoIC8gOCwgd2luZG93LmlubmVySGVpZ2h0IC8gMTYsIHdpbmRvdy5pbm5lckhlaWdodCAvIC0xNiwgLTIwMCwgNTAwKTtcbiAgICAgICAgICAgICAgICBjYW1lcmEucG9zaXRpb24ueCA9IGNvbnRyb2xzLnBvc2l0aW9uWDtcbiAgICAgICAgICAgICAgICBjYW1lcmEucG9zaXRpb24ueSA9IGNvbnRyb2xzLnBvc2l0aW9uWTtcbiAgICAgICAgICAgICAgICBjYW1lcmEucG9zaXRpb24ueiA9IGNvbnRyb2xzLnBvc2l0aW9uWjtcbiAgICAgICAgICAgICAgICBjYW1lcmEubG9va0F0KG5ldyBUSFJFRS5WZWN0b3IzKDAsMCwwKSk7XG4gICAgICAgICAgICAgICAgdGhpcy5wZXJzcGVjdGl2ZSA9IFwiT3J0aG9ncmFwaGljXCI7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNhbWVyYSA9IG5ldyBUSFJFRS5QZXJzcGVjdGl2ZUNhbWVyYSg0NSwgd2luZG93LmlubmVyV2lkdGggLyB3aW5kb3cuaW5uZXJIZWlnaHQsIDAuMSwgMTAwMCk7XG4gICAgICAgICAgICAgICAgY2FtZXJhLnBvc2l0aW9uLnggPSBjb250cm9scy5wb3NpdGlvblg7XG4gICAgICAgICAgICAgICAgY2FtZXJhLnBvc2l0aW9uLnkgPSBjb250cm9scy5wb3NpdGlvblk7XG4gICAgICAgICAgICAgICAgY2FtZXJhLnBvc2l0aW9uLnogPSBjb250cm9scy5wb3NpdGlvblo7XG4gICAgICAgICAgICAgICAgY2FtZXJhLmxvb2tBdChuZXcgVEhSRUUuVmVjdG9yMygwLDAsMCkpO1xuICAgICAgICAgICAgICAgIHRoaXMucGVyc3BlY3RpdmUgPSBcIlBlcnNwZWN0aXZlXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfTtcblxuICAgIHZhciBndWkgPSBuZXcgZGF0LkdVSSgpO1xuICAgIGd1aS5hZGQoY29udHJvbHMsICdzd2l0Y2hDYW1lcmEnKTtcbiAgICBndWkuYWRkKGNvbnRyb2xzLCAncG9zaXRpb25YJywwLDEwMDApLm9uQ2hhbmdlKGNvbnRyb2xzLmNoYW5nZUNhbWVyYVBvc2l0aW9uKTtcbiAgICBndWkuYWRkKGNvbnRyb2xzLCAncG9zaXRpb25ZJywwLDEwMDApLm9uQ2hhbmdlKGNvbnRyb2xzLmNoYW5nZUNhbWVyYVBvc2l0aW9uKTtcbiAgICBndWkuYWRkKGNvbnRyb2xzLCAncG9zaXRpb25aJywwLDEwMDApLm9uQ2hhbmdlKGNvbnRyb2xzLmNoYW5nZUNhbWVyYVBvc2l0aW9uKTtcbiAgICBndWkuYWRkKGNvbnRyb2xzLCAncGVyc3BlY3RpdmUnKS5saXN0ZW4oKTtcbn1cbi8qKlxuICog5Yid5aeL5YyWXG4gKiBAcGFyYW0ge+aYr+WQpuW8gOWni+a4uOaIj30gc3RhcnQgXG4gKi9cbmZ1bmN0aW9uIGluaXQocm9sZSkge1xuXG4gIHN0YXRzID0gaW5pdFN0YXRzKCk7XG5cbiAgLy8g5paw5bu65LiA5Liq5Zy65pmvXG4gIHNjZW5lID0gbmV3IFRIUkVFLlNjZW5lKCk7XG4gIFxuICAvLyDliJ3lp4vljJbkuIDkuKrnm7jmnLpcbiAgY2FtZXJhID0gaW5pdENhbWVyYShyb2xlLHNjZW5lKVxuXG4gIC8v5Yid5aeL5YyW5Zy65pmv5Lit55qE572R5qC8XG4gIG1lc2hzID0gaW5pdE1lc2gocm9sZSxzY2VuZSlcblxuICAvLyDliJvlu7rmuLLmn5PlmahcbiAgcmVuZGVyZXIgPSBuZXcgVEhSRUUuV2ViR0xSZW5kZXJlcigpO1xuXG4gIHJlbmRlcmVyLnNldENsZWFyQ29sb3IobmV3IFRIUkVFLkNvbG9yKDB4RUVFRUVFLCAxLjApKTtcbiAgcmVuZGVyZXIuc2V0U2l6ZSh3aW5kb3cuaW5uZXJXaWR0aCwgd2luZG93LmlubmVySGVpZ2h0KTtcbiAgcmVuZGVyZXIuc2hhZG93TWFwRW5hYmxlZCA9IHRydWU7XG5cbiAgLy8gYWRkIHN1YnRsZSBhbWJpZW50IGxpZ2h0aW5nXG4gIHZhciBhbWJpZW50TGlnaHQgPSBuZXcgVEhSRUUuQW1iaWVudExpZ2h0KDB4ZmZmZmZmKTtcbiAgc2NlbmUuYWRkKGFtYmllbnRMaWdodCk7XG5cbiAgLy8gYWRkIHNwb3RsaWdodCBmb3IgdGhlIHNoYWRvd3NcbiAgdmFyIHBvaW50TGlnaHQgPSBuZXcgVEhSRUUuUG9pbnRMaWdodCgweGZmZmZmZik7XG4gIHBvaW50TGlnaHQucG9zaXRpb24uc2V0KC00MCwgNjAsIC0xMCk7XG4gIHBvaW50TGlnaHQuZGlzdGFuY2UgPSAxMDAwO1xuICAvLyBwb2ludExpZ2h0LmNhc3RTaGFkb3cgPSB0cnVlO1xuICBzY2VuZS5hZGQocG9pbnRMaWdodCk7XG5cbiAgY3JlYXRlR1VJKHJvbGUpXG4gIC8vIGFkZCB0aGUgb3V0cHV0IG9mIHRoZSByZW5kZXJlciB0byB0aGUgaHRtbCBlbGVtZW50XG4gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiV2ViR0wtb3V0cHV0XCIpLmFwcGVuZENoaWxkKHJlbmRlcmVyLmRvbUVsZW1lbnQpO1xuICByZW5kZXIoKTtcblxuICBiaW5kRXZlbnQocm9sZSlcbiAgXG59XG5cblxuIiwiaW1wb3J0IHNvY2tldENsaWVudCBmcm9tICdzb2NrZXQuaW8tY2xpZW50JztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgU29rY2V0U2VydmVyIHtcbiAgICBjb25zdHJ1Y3Rvcih7ZXZlbnRzfSl7XG4gICAgICAgIHRoaXMuY2xpZW50ID0gbmV3IHNvY2tldENsaWVudCgpXG4gICAgICAgIGlmKCF0aGlzLmNsaWVudCl7XG4gICAgICAgICAgICByZXR1cm4gbnVsbFxuICAgICAgICB9XG4gICAgICAgIGlmKGV2ZW50cyl7XG4gICAgICAgICAgICB0aGlzLmFkZEV2ZW50KGV2ZW50cylcbiAgICAgICAgfVxuICAgIH1cbiAgICBhZGRFdmVudChldmVudHMpe1xuICAgICAgICB0cnl7XG4gICAgICAgICAgICBPYmplY3QuZW50cmllcyhldmVudHMpLm1hcChldmVudCA9PntcbiAgICAgICAgICAgICAgICB0aGlzLmNsaWVudC5vbi5hcHBseSh0aGlzLmNsaWVudCxldmVudClcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1jYXRjaChlKXtcbiAgICAgICAgICAgIHRocm93ICdhZGQgZXZlbnRzIGVycm9yJ1xuICAgICAgICB9XG4gICAgICAgIFxuICAgIH1cblxufSJdLCJzb3VyY2VSb290IjoiIn0=