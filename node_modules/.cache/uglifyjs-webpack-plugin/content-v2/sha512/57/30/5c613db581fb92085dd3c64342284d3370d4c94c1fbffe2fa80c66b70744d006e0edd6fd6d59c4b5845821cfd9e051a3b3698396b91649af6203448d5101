{"map":"{\"version\":3,\"sources\":[\"/Applications/work/game/config/constConfig.js\",\"/Applications/work/game/static/index.js\",\"/Applications/work/game/static/public/socket.js\"],\"names\":[\"exports\",\"REDIS_MESSAGE\",\"SHARE_MESSAGE\",\"KEY\",\"EVENT\",\"CONTENT\",\"HAPPY_RECORD\",\"HOST_URL\",\"GAME_MESSAGE\",\"GAME_INIT\",\"REDIS_READY\",\"GAME_SELECT_ROLE\",\"__webpack_require__\",\"_constConfig\",\"gameData\",\"send\",\"key\",\"value\",\"arguments\",\"length\",\"undefined\",\"message\",\"name\",\"number\",\"window\",\"__GAME_NUMBER__\",\"uid\",\"__USER_ID__\",\"socketServer\",\"client\",\"emit\",\"_extends\",\"SocketServer\",\"events\",\"connect\",\"_defineProperty\",\"_events\",\"initData\",\"init\",\"roles\",\"playerA\",\"playerB\",\"audience\",\"includes\",\"checkRole\",\"JSON\",\"parse\",\"_ref\",\"status\",\"role\",\"console\",\"log\",\"createRoleCard\",\"position\",\"card\",\"geom\",\"texture\",\"THREE\",\"ImageUtils\",\"loadTexture\",\"meshMaterial\",\"MeshLambertMaterial\",\"color\",\"side\",\"FrontSide\",\"map\",\"ID\",\"transparent\",\"opacity\",\"Mesh\",\"createRoleMesh\",\"BoxGeometry\",\"receiveShadow\",\"rotation\",\"x\",\"Math\",\"PI\",\"z\",\"y\",\"initMesh\",\"scene\",\"planeGeometry\",\"PlaneGeometry\",\"planeMaterial\",\"plane\",\"add\",\"cubeGeometry\",\"textureBlack\",\"textureWhite\",\"textureEmpty\",\"chessboard\",\"forEach\",\"boxs\",\"i\",\"box\",\"j\",\"cubeMaterial\",\"Color\",\"cube\",\"parameters\",\"height\",\"width\",\"createChessboard\",\"Vector3\",\"stats\",\"Stats\",\"setMode\",\"domElement\",\"style\",\"left\",\"top\",\"document\",\"getElementById\",\"appendChild\",\"initStats\",\"Scene\",\"camera\",\"OrthographicCamera\",\"innerWidth\",\"innerHeight\",\"lookAt\",\"PerspectiveCamera\",\"initCamera\",\"renderer\",\"WebGLRenderer\",\"setClearColor\",\"setSize\",\"shadowMapEnabled\",\"ambientLight\",\"AmbientLight\",\"pointLight\",\"PointLight\",\"set\",\"distance\",\"render\",\"update\",\"requestAnimationFrame\",\"Projector\",\"addEventListener\",\"event\",\"vector\",\"clientX\",\"clientY\",\"unproject\",\"intersects\",\"Raycaster\",\"sub\",\"normalize\",\"intersectObjects\",\"object\",\"material\",\"alert\",\"SokcetServer\",\"_classCallCheck\",\"this\",\"socketClient\",\"addEvent\",\"_this\",\"Object\",\"entries\",\"on\",\"apply\",\"e\"],\"mappings\":\"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\",\"sourcesContent\":[\"const REDIS_MESSAGE = {\\n    SHARE_MESSAGE:{\\n        KEY:'SHARE_MESSAGE_KEY',\\n        EVENT:'SHARE_MESSAGE_EVENT',\\n        CONTENT:'%USER% %OPERATE% %CONTENT%'\\n    }\\n}\\n\\nexports.REDIS_MESSAGE = REDIS_MESSAGE\\n\\nconst HAPPY_RECORD = {\\n    HOST_URL:'http://localhost:3001'\\n}\\n\\nexports.HAPPY_RECORD = HAPPY_RECORD\\n\\n\\nexports.GAME_MESSAGE = {\\n    GAME_INIT:'GAME_INIT',\\n    REDIS_READY:'REDIS_READY',\\n    GAME_SELECT_ROLE:'GAME_SELECT_ROLE'\\n}\",\"import SocketServer from \\\"./public/socket\\\"\\nimport { GAME_MESSAGE } from \\\"../config/constConfig\\\"\\nlet gameData = {}\\nconst send = (key,value={})=>{\\n  let message = {name:'wuziqi',number:window.__GAME_NUMBER__,uid:window.__USER_ID__}\\n  socketServer.client.emit(key,{...message,...value})\\n}\\nconst socketServer = new SocketServer({\\n  events:{\\n    'connect':()=>{\\n    },\\n    [GAME_MESSAGE.REDIS_READY]:(message)=>{\\n      send(GAME_MESSAGE.GAME_INIT)\\n    },\\n    [GAME_MESSAGE.GAME_INIT]:(initData)=>{\\n      gameData = typeof initData == 'string'?JSON.parse(initData):initData\\n      init(checkRole(gameData.roles))\\n    },\\n    [GAME_MESSAGE.GAME_SELECT_ROLE]:({status,role})=>{\\n      console.log(status)\\n      if(status){\\n        init(role)\\n      }\\n    }\\n  }\\n});\\n\\nfunction createRoleMesh(geom,role) {\\n\\n  var texture = THREE.ImageUtils.loadTexture(\\\"/assets/textures/general/\\\" + role + \\\".jpg\\\");\\n  var meshMaterial = new THREE.MeshLambertMaterial({color: 0x7777ff});\\n  meshMaterial.side = THREE.FrontSide;//THREE.DoubleSide\\n  meshMaterial.map = texture;\\n  meshMaterial.ID = role;\\n  if(gameData.roles[role]&&role!='audience'){\\n    meshMaterial.transparent = true; //是否可以设置透明度\\n    meshMaterial.opacity = 0.1;      //设置透明度\\n  }\\n  //基础材质 多用于线框调试\\n  // var wireFrameMat = new THREE.MeshBasicMaterial();\\n  // wireFrameMat.wireframe = true;\\n\\n  // 融合材质\\n  // var mesh = THREE.SceneUtils.createMultiMaterialObject(geom, [meshMaterial, wireFrameMat]);\\n  var mesh = new THREE.Mesh(geom, meshMaterial);\\n  return mesh;\\n}\\n/**\\n * 创建角色卡片\\n * @param {位置} position \\n * @param {角色} role \\n */\\nfunction createRoleCard(position,role){\\n    // create the ground plane\\n    var cardGeometry = new THREE.BoxGeometry(4, 4, 4,1, 1,1);\\n    var card = createRoleMesh(cardGeometry,role);\\n    card.name = role;\\n    // var plane = new THREE.Mesh(planeGeometry, planeMaterial);\\n    card.receiveShadow = true;\\n    // rotate and position the plane\\n    card.rotation.x = 0.5 * Math.PI;\\n    card.rotation.z = -0.5 * Math.PI;\\n    card.position.x = position.x;\\n    card.position.y = position.y;\\n    card.position.z = position.z;\\n    return card\\n}\\nfunction createChessboard(scene){\\n  // create the ground plane\\n  var planeGeometry = new THREE.PlaneGeometry(180, 180);\\n  var planeMaterial = new THREE.MeshLambertMaterial({color: 0xffffff});\\n  var plane = new THREE.Mesh(planeGeometry, planeMaterial);\\n\\n\\n  // rotate and position the plane\\n  plane.rotation.x = -0.5 * Math.PI;\\n  plane.position.x = 0;\\n  plane.position.y = 0;\\n  plane.position.z = 0;\\n  // add the plane to the scene\\n  scene.add(plane);\\n  var cubeGeometry = new THREE.BoxGeometry(4, 4, 4);\\n  var textureBlack = THREE.ImageUtils.loadTexture(\\\"/assets/textures/general/black.jpeg\\\");\\n  var textureWhite = THREE.ImageUtils.loadTexture(\\\"/assets/textures/general/white.jpeg\\\");\\n  var textureEmpty = THREE.ImageUtils.loadTexture(\\\"/assets/textures/general/empty.jpg\\\");\\n  gameData.chessboard.forEach((boxs,i)=>{\\n      boxs.forEach((box,j)=>{\\n          var cubeMaterial = new THREE.MeshLambertMaterial();\\n          cubeMaterial.color = new THREE.Color(0, 0, 0);\\n          if(box.value == 1){\\n            cubeMaterial.map = textureWhite\\n          }else if(box.value == 2){\\n            cubeMaterial.map = textureBlack\\n          }else{\\n            cubeMaterial.map = textureEmpty\\n          }\\n          cubeMaterial.side = THREE.FrontSide;//THREE.DoubleSide\\n          var cube = new THREE.Mesh(cubeGeometry, cubeMaterial);\\n\\n          cube.position.z = -((planeGeometry.parameters.height) / 2) + (j * 5);\\n          cube.position.x = -((planeGeometry.parameters.width) / 2) + (i * 5);\\n          cube.position.y = 2;\\n\\n          scene.add(cube);\\n      })\\n  })\\n}\\nfunction checkRole(roles){\\n    if(roles.playerA == window.__USER_ID__){\\n      return 'playerA'\\n    }\\n    if(roles.playerB == window.__USER_ID__){\\n      return 'playerB'\\n    }\\n    if(roles.audience.includes(window.__USER_ID__)){\\n      return 'audience'\\n    }\\n    return ''\\n}\\n\\nfunction initMesh(role,scene){\\n   if(!role){\\n      var playerA = createRoleCard(new THREE.Vector3(0, 0, 5),'playerA')\\n      var playerB = createRoleCard(new THREE.Vector3(0, 0, 0),'playerB')\\n      var audience = createRoleCard(new THREE.Vector3(0, 0, -5),'audience')\\n      scene.add(playerA);\\n      scene.add(playerB);\\n      scene.add(audience);\\n   }else{\\n      createChessboard(scene)\\n   }\\n}\\n\\nfunction initCamera(role,scene){\\n    var camera = ''\\n   if(!role){\\n     // create a camera, which defines where we're looking at.\\n      camera = new THREE.PerspectiveCamera(45, window.innerWidth / window.innerHeight, 0.1, 1000);\\n      // position and point the camera to the center of the scene\\n      camera.position.x = 0;\\n      camera.position.y = -20;\\n      camera.position.z = 0;\\n      camera.lookAt(scene.position);\\n   }else{\\n      camera = new THREE.OrthographicCamera(window.innerWidth / -16, window.innerWidth / 16, window.innerHeight / 16, window.innerHeight / -16, -200, 500);\\n      camera.position.x = -20;\\n      camera.position.y = 0;\\n      camera.position.z = 0;\\n      camera.lookAt(scene.position);\\n   }\\n   return camera\\n}\\n/**\\n * 初始化\\n * @param {是否开始游戏} start \\n */\\nfunction init(role) {\\n\\n  var stats = initStats();\\n\\n  // 新建一个场景\\n  var scene = new THREE.Scene();\\n  // 初始化一个相机\\n  var camera = initCamera(role,scene)\\n  scene.add(camera);\\n\\n  // 创建渲染器\\n  var renderer = new THREE.WebGLRenderer();\\n\\n  renderer.setClearColor(new THREE.Color(0xEEEEEE, 1.0));\\n  renderer.setSize(window.innerWidth, window.innerHeight);\\n  renderer.shadowMapEnabled = true;\\n  initMesh(role,scene)\\n\\n  \\n  \\n  // add subtle ambient lighting\\n  var ambientLight = new THREE.AmbientLight(0xffffff);\\n  scene.add(ambientLight);\\n\\n  // add spotlight for the shadows\\n  var pointLight = new THREE.PointLight(0xffffff);\\n  pointLight.position.set(-40, 60, -10);\\n  pointLight.distance = 1000;\\n  // pointLight.castShadow = true;\\n  scene.add(pointLight);\\n\\n  // add the output of the renderer to the html element\\n  document.getElementById(\\\"WebGL-output\\\").appendChild(renderer.domElement);\\n\\n  render();\\n\\n  function render() {\\n      stats.update();\\n      // playerA.rotation.x += 0.01 \\n      // playerB.rotation.x += 0.01\\n      // audience.rotation.x += 0.01\\n      // render using requestAnimationFrame\\n      requestAnimationFrame(render);\\n      renderer.render(scene, camera);\\n  }\\n\\n  function initStats() {\\n\\n      var stats = new Stats();\\n\\n      stats.setMode(0); // 0: fps, 1: ms\\n\\n      // Align top-left\\n      stats.domElement.style.position = 'absolute';\\n      stats.domElement.style.left = '0px';\\n      stats.domElement.style.top = '0px';\\n\\n      document.getElementById(\\\"Stats-output\\\").appendChild(stats.domElement);\\n\\n      return stats;\\n  }\\n  var projector = new THREE.Projector();\\n  document.addEventListener('mousedown', onDocumentMouseDown, false);\\n\\n  function onDocumentMouseDown(event) {\\n\\n      var vector = new THREE.Vector3(( event.clientX / window.innerWidth ) * 2 - 1, -( event.clientY / window.innerHeight ) * 2 + 1, 0.5);\\n      vector = vector.unproject(camera);\\n      var raycaster = new THREE.Raycaster(camera.position, vector.sub(camera.position).normalize());\\n      var intersects = raycaster.intersectObjects([playerA,playerB,audience]);\\n      if (intersects.length > 0) {\\n\\n          console.log(intersects[0]);\\n          if(intersects[0].object.material.opacity != 0.1){\\n            intersects[0].object.material.transparent = true;\\n            intersects[0].object.material.opacity = 0.1;\\n            send(GAME_MESSAGE.GAME_SELECT_ROLE,{role:intersects[0].object.name})\\n          }else{\\n            alert('角色不可选')\\n          }\\n          \\n      }\\n  }\\n}\\n\\n\\n\",\"import socketClient from 'socket.io-client';\\n\\nexport default class SokcetServer {\\n    constructor({events}){\\n        this.client = new socketClient()\\n        if(!this.client){\\n            return null\\n        }\\n        if(events){\\n            this.addEvent(events)\\n        }\\n    }\\n    addEvent(events){\\n        try{\\n            Object.entries(events).map(event =>{\\n                this.client.on.apply(this.client,event)\\n            })\\n        }catch(e){\\n            throw 'add events error'\\n        }\\n        \\n    }\\n\\n}\"]}","code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[\"main\"],{\"./config/constConfig.js\":\n/*!*******************************!*\\\n  !*** ./config/constConfig.js ***!\n  \\*******************************/\n/*! no static exports found */function(e,n){n.REDIS_MESSAGE={SHARE_MESSAGE:{KEY:\"SHARE_MESSAGE_KEY\",EVENT:\"SHARE_MESSAGE_EVENT\",CONTENT:\"%USER% %OPERATE% %CONTENT%\"}};n.HAPPY_RECORD={HOST_URL:\"http://localhost:3001\"},n.GAME_MESSAGE={GAME_INIT:\"GAME_INIT\",REDIS_READY:\"REDIS_READY\",GAME_SELECT_ROLE:\"GAME_SELECT_ROLE\"}},\"./static/index.js\":\n/*!*************************!*\\\n  !*** ./static/index.js ***!\n  \\*************************/\n/*! no static exports found */function(e,n,t){\"use strict\";var o,i=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},r=function(e){return e&&e.__esModule?e:{default:e}}(t(/*! ./public/socket */\"./static/public/socket.js\")),a=t(/*! ../config/constConfig */\"./config/constConfig.js\");function E(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var s={},c=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t={name:\"wuziqi\",number:window.__GAME_NUMBER__,uid:window.__USER_ID__};l.client.emit(e,i({},t,n))},l=new r.default({events:(o={connect:function(){}},E(o,a.GAME_MESSAGE.REDIS_READY,function(e){c(a.GAME_MESSAGE.GAME_INIT)}),E(o,a.GAME_MESSAGE.GAME_INIT,function(e){p(function(e){if(e.playerA==window.__USER_ID__)return\"playerA\";if(e.playerB==window.__USER_ID__)return\"playerB\";if(e.audience.includes(window.__USER_ID__))return\"audience\";return\"\"}((s=\"string\"==typeof e?JSON.parse(e):e).roles))}),E(o,a.GAME_MESSAGE.GAME_SELECT_ROLE,function(e){var n=e.status,t=e.role;console.log(n),n&&p(t)}),o)});function u(e,n){var t=function(e,n){var t=THREE.ImageUtils.loadTexture(\"/assets/textures/general/\"+n+\".jpg\"),o=new THREE.MeshLambertMaterial({color:7829503});return o.side=THREE.FrontSide,o.map=t,o.ID=n,s.roles[n]&&\"audience\"!=n&&(o.transparent=!0,o.opacity=.1),new THREE.Mesh(e,o)}(new THREE.BoxGeometry(4,4,4,1,1,1),n);return t.name=n,t.receiveShadow=!0,t.rotation.x=.5*Math.PI,t.rotation.z=-.5*Math.PI,t.position.x=e.x,t.position.y=e.y,t.position.z=e.z,t}function d(e,n){if(e)!function(e){var n=new THREE.PlaneGeometry(180,180),t=new THREE.MeshLambertMaterial({color:16777215}),o=new THREE.Mesh(n,t);o.rotation.x=-.5*Math.PI,o.position.x=0,o.position.y=0,o.position.z=0,e.add(o);var i=new THREE.BoxGeometry(4,4,4),r=THREE.ImageUtils.loadTexture(\"/assets/textures/general/black.jpeg\"),a=THREE.ImageUtils.loadTexture(\"/assets/textures/general/white.jpeg\"),E=THREE.ImageUtils.loadTexture(\"/assets/textures/general/empty.jpg\");s.chessboard.forEach(function(t,o){t.forEach(function(t,s){var c=new THREE.MeshLambertMaterial;c.color=new THREE.Color(0,0,0),1==t.value?c.map=a:2==t.value?c.map=r:c.map=E,c.side=THREE.FrontSide;var l=new THREE.Mesh(i,c);l.position.z=-n.parameters.height/2+5*s,l.position.x=-n.parameters.width/2+5*o,l.position.y=2,e.add(l)})})}(n);else{var t=u(new THREE.Vector3(0,0,5),\"playerA\"),o=u(new THREE.Vector3(0,0,0),\"playerB\"),i=u(new THREE.Vector3(0,0,-5),\"audience\");n.add(t),n.add(o),n.add(i)}}function p(e){var n=function(){var e=new Stats;return e.setMode(0),e.domElement.style.position=\"absolute\",e.domElement.style.left=\"0px\",e.domElement.style.top=\"0px\",document.getElementById(\"Stats-output\").appendChild(e.domElement),e}(),t=new THREE.Scene,o=function(e,n){var t=\"\";return e?((t=new THREE.OrthographicCamera(window.innerWidth/-16,window.innerWidth/16,window.innerHeight/16,window.innerHeight/-16,-200,500)).position.x=-20,t.position.y=0,t.position.z=0,t.lookAt(n.position)):((t=new THREE.PerspectiveCamera(45,window.innerWidth/window.innerHeight,.1,1e3)).position.x=0,t.position.y=-20,t.position.z=0,t.lookAt(n.position)),t}(e,t);t.add(o);var i=new THREE.WebGLRenderer;i.setClearColor(new THREE.Color(15658734,1)),i.setSize(window.innerWidth,window.innerHeight),i.shadowMapEnabled=!0,d(e,t);var r=new THREE.AmbientLight(16777215);t.add(r);var E=new THREE.PointLight(16777215);E.position.set(-40,60,-10),E.distance=1e3,t.add(E),document.getElementById(\"WebGL-output\").appendChild(i.domElement),function e(){n.update();requestAnimationFrame(e);i.render(t,o)}();new THREE.Projector;document.addEventListener(\"mousedown\",function(e){var n=new THREE.Vector3(e.clientX/window.innerWidth*2-1,-e.clientY/window.innerHeight*2+1,.5);n=n.unproject(o);var t=new THREE.Raycaster(o.position,n.sub(o.position).normalize()).intersectObjects([playerA,playerB,audience]);t.length>0&&(console.log(t[0]),.1!=t[0].object.material.opacity?(t[0].object.material.transparent=!0,t[0].object.material.opacity=.1,c(a.GAME_MESSAGE.GAME_SELECT_ROLE,{role:t[0].object.name})):alert(\"角色不可选\"))},!1)}},\"./static/public/socket.js\":\n/*!*********************************!*\\\n  !*** ./static/public/socket.js ***!\n  \\*********************************/\n/*! no static exports found */function(e,n,t){\"use strict\";Object.defineProperty(n,\"__esModule\",{value:!0});var o=function(){function e(e,n){for(var t=0;t<n.length;t++){var o=n[t];o.enumerable=o.enumerable||!1,o.configurable=!0,\"value\"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(n,t,o){return t&&e(n.prototype,t),o&&e(n,o),n}}(),i=function(e){return e&&e.__esModule?e:{default:e}}(t(/*! socket.io-client */\"./node_modules/socket.io-client/lib/index.js\"));var r=function(){function e(n){var t=n.events;if(function(e,n){if(!(e instanceof n))throw new TypeError(\"Cannot call a class as a function\")}(this,e),this.client=new i.default,!this.client)return null;t&&this.addEvent(t)}return o(e,[{key:\"addEvent\",value:function(e){var n=this;try{Object.entries(e).map(function(e){n.client.on.apply(n.client,e)})}catch(e){throw\"add events error\"}}}]),e}();n.default=r},0:\n/*!********************!*\\\n  !*** ws (ignored) ***!\n  \\********************/\n/*! no static exports found */function(e,n){}},[[\"./static/index.js\",\"manifest\",\"chunk-vendor\"]]]);","extractedComments":[]}